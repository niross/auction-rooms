<VirtualHost *:80>
    ServerAdmin admin@sonick.luckybreak.co.uk
    ServerName sonick.luckybreak.co.uk
    ServerAlias www.sonick.luckybreak.co.uk
    Redirect permanent / https://sonick.luckybreak.co.uk/
</VirtualHost>
<VirtualHost *:443>
    ServerAdmin admin@sonick.luckybreak.co.uk
    ServerName sonick.luckybreak.co.uk
    ServerAlias www.sonick.luckybreak.co.uk

    ErrorLog /var/log/apache2/error.log
    LogLevel warn
    CustomLog /var/log/apache2/access.log combined

    WSGIDaemonProcess bindays-prod user=www-data group=www-data threads=10 python-path=/home/nick/.virtualenvs/binday/lib/python2.7/site-packages/
    WSGIProcessGroup bindays-prod
    WSGIScriptAlias / /var/www/sites/luckybreak/config/wsgi.py

    ErrorLog /var/log/apache2/error.log
    LogLevel warn

    CustomLog /var/log/apache2/access.log combined

    Alias /media "/var/www/sites/luckybreak/luckybreak/media/"
    <Location "/media">
      SetHandler None
    </Location>

    Alias /static "/var/www/sites/luckybreak/staticfiles/"
    <Location "/static">
      SetHandler None
    </Location>

    SSLEngine on

    SSLCertificateFile   /etc/letsencrypt/live/www.sonick.luckybreak.co.uk/cert.pem
    SSLCertificateKeyFile /etc/letsencrypt/live/www.sonick.luckybreak.co.uk/privkey.pem
    SSLCertificateChainFile /etc/letsencrypt/live/www.sonick.luckybreak.co.uk/chain.pem

    <FilesMatch "\.(cgi|shtml|phtml|php)$">
        SSLOptions +StdEnvVars
    </FilesMatch>
    <Directory /usr/lib/cgi-bin>
        SSLOptions +StdEnvVars
    </Directory>

    BrowserMatch "MSIE [2-6]" \
        nokeepalive ssl-unclean-shutdown \
        downgrade-1.0 force-response-1.0
    # MSIE 7 and newer should be able to use keepalive
    BrowserMatch "MSIE [17-9]" ssl-unclean-shutdown

</VirtualHost>
