<VirtualHost *:80>
    ServerAdmin admin@luckybreak.sonick.co.uk
    ServerName luckybreak.sonick.co.uk
    ServerAlias www.luckybreak.sonick.co.uk
    Redirect permanent / https://luckybreak.sonick.co.uk/
</VirtualHost>
<VirtualHost *:443>
    ServerAdmin admin@luckybreak.sonick.co.uk
    ServerName luckybreak.sonick.co.uk
    ServerAlias www.luckybreak.sonick.co.uk

    ErrorLog /var/log/apache2/error.log
    LogLevel warn
    CustomLog /var/log/apache2/access.log combined

    # Set the path to SSL certificate
    # Usage: SSLCertificateFile /path/to/cert.pem
    SSLEngine On
    SSLCertificateFile /etc/letsencrypt/live/luckybreak.sonick.co.uk/cert.pem
    SSLCertificateKeyFile /etc/letsencrypt/live/luckybreak.sonick.co.uk/privkey.pem
    SSLCertificateChainFile /etc/letsencrypt/live/luckybreak.sonick.co.uk/chain.pem

    Alias /media "/var/www/sites/luckybreak/luckybreak/media/"
    <Location "/media">
      SetHandler None
    </Location>

    Alias /static "/var/www/sites/luckybreak/staticfiles/"
    <Location "/static">
      SetHandler None
    </Location>

    # Servers to proxy the connection, or;
    # List of application servers:
    # Usage:
    # ProxyPass / http://[IP Addr.]:[port]/
    # ProxyPassReverse / http://[IP Addr.]:[port]/
    # Example: 
    ProxyRequests off
    ProxyPreserveHost On

    ProxyPassMatch ^/ws/(.*)$ ws://0.0.0.0:8080/ws/$1        
    ProxyPassReverse ^/ws/ ws://0.0.0.0:8080/ws/

    ProxyPass /media/ !
    ProxyPass /static/ !
    ProxyPass / http://0.0.0.0:8080/


    #ProxyPassReverse / http://0.0.0.0:8080/
    #RequestHeader set X-Forwarded-Proto "https"

    # Or, balance the load:
    # ProxyPass / balancer://balancer_cluster_name

</VirtualHost>
#<VirtualHost *:443>
#    ServerAdmin admin@luckybreak.sonick.co.uk
#    ServerName luckybreak.sonick.co.uk
#    ServerAlias www.luckybreak.sonick.co.uk
#
#    ErrorLog /var/log/apache2/error.log
#    LogLevel warn
#    CustomLog /var/log/apache2/access.log combined
#
#    WSGIDaemonProcess luckybreak-stag user=www-data group=www-data threads=10 python-path=/home/nick/.virtualenvs/luckybreak/lib/python2.7/site-packages/
#    WSGIProcessGroup luckybreak-stag
#    WSGIScriptAlias / /var/www/sites/luckybreak/config/wsgi.py
#
#    CustomLog /var/log/apache2/access.log combined
#
#    Alias /media "/var/www/sites/luckybreak/luckybreak/media/"
#    <Location "/media">
#      SetHandler None
#    </Location>
#
#    Alias /static "/var/www/sites/luckybreak/staticfiles/"
#    <Location "/static">
#      SetHandler None
#    </Location>
#
#    SSLEngine on
#
#    SSLCertificateFile /etc/letsencrypt/live/luckybreak.sonick.co.uk/cert.pem
#    SSLCertificateKeyFile /etc/letsencrypt/live/luckybreak.sonick.co.uk/privkey.pem
#    SSLCertificateChainFile /etc/letsencrypt/live/luckybreak.sonick.co.uk/chain.pem
#
#    <FilesMatch "\.(cgi|shtml|phtml|php)$">
#        SSLOptions +StdEnvVars
#    </FilesMatch>
#    <Directory /usr/lib/cgi-bin>
#        SSLOptions +StdEnvVars
#    </Directory>
#
#    BrowserMatch "MSIE [2-6]" \
#        nokeepalive ssl-unclean-shutdown \
#        downgrade-1.0 force-response-1.0
#    # MSIE 7 and newer should be able to use keepalive
#    BrowserMatch "MSIE [17-9]" ssl-unclean-shutdown
#</VirtualHost>
